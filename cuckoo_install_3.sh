#!/bin/bash
#Program: 
# This program is used to install cuckoo 

# Reference site:
# https://cuckoo.sh/docs/installation/host/installation.html
# https://stackoverflow.com/questions/41407396/is-gui-for-android-sdk-manager-gone
# https://github.com/idanr1986/cuckoo-droid/blob/master/README.md

# Run this on another terminal
cd cuckoo/utils/android_emulator_creator/
sudo pip install adb
sudo apt-get install adb -y
bash create_guest_avd.sh
cd ~/cuckoo/agent/android/java_agent/
adb install CuckooAgent.apk


# First modify the setting the the phone
#Follow the following steps to set up the emulator
#	Press settings->Security->screenlock->none
#	Press settings->Display->sleep->30 minutes
#	Start Generate contacts app
#	Start Supersuser app
#	Start Xposedinstaller app
#	In Modules, check both packages Droidmon , Android Blue Pill
#	Press Framework -> OK -> Install -> Allow -> Cancel
#		(if it shows rooted fail -> Press install -> Cancel)
#	Press Soft reboot -> OK
#	After emulator restarted completely, don't close it.

# ??????
cp ~/.android/avd/aosx.avd/system-qemu.img ~/android-sdk-linux/system-images/android-16/default/armeabi-v7a/system.img

# Turn off the emulator
# 
cd ~
rm ~/cuckoo/analyzer/android/lib/api/adb.py
cp ~/AndroidMalware/adb.py ~/cuckoo/analyzer/android/lib/api/


#sudo pip install sqlalchemy
cd ~
wget https://github.com/androguard/androguard/archive/v2.0.tar.gz
tar -xvf v2.0.tar.gz
rm *tar.gz
cd androguard-2.0/
# after setup pip will fail...
sudo python setup.py install
sudo apt remove -y python-pip
sudo pip install requests
sudo pip install protobuf
#sudo pip install django --upgrade
#sudo pip install 'django-guardian>=1.4.6'
sudo pip install django==1.9.6
#sudo pip install Jinja2
#sudo pip install Jinja2==2.7.2
sudo apt-get install -y python-dpkt


